<head>
	<style type="text/css">
		#image_container {
			background-image: url('/handshake.png');
			width: 645px;
			height: 400px;
			position: relative;
		}

		.cross {
			position: absolute;
			z-index: 2;
		}

		.hidden {
			display: none;
		}

		textarea {
			width: 300px;
			height: 300px;
		}
	</style>
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
	<script language="JavaScript">
	function on_click(event){
		// get mouse click position
		click_position_x = event.offsetX ? (event.offsetX) : event.pageX - $("#image_container").offsetLeft;
		click_position_y = event.offsetY ? (event.offsetY) : event.pageY - $("#image_container").offsetTop;

		// place cross
		var cross = $('.cross').first().clone();
		cross.css('left', click_position_x - 4);
		cross.css('top', click_position_y - 4);
		cross.removeClass('hidden');
		$('.cross').first().after(cross);

		// record last values
		$('#form_x').val(click_position_x);
		$('#form_y').val(click_position_y);

		// append to list of all values
		var new_line = '\n';
		if($('textarea').val().length == 0)
			new_line = '';
		var new_textarea_value = $('textarea').val() + new_line + $('#format').val().replace('{{x}}', click_position_x).replace('{{y}}', click_position_y);
		$('textarea').val(new_textarea_value);
	}
	</script>
</head>
<body>
	<form method="post">
		<div id="image_container" onclick="on_click(event)">
		<img src="/crosshairs.png" class="cross hidden"></div>
		<p>
			Custom format: <input type="text" id="format" value='{"x": {{x}}, "y": {{y}}},' />
		</p>
		<p>
			Results:
			<textarea id="results"></textarea>
		</p>
		<p>
			Last coordinates: x = <input type="text" id="form_x" size="4" /> y = <input type="text" id="form_y" size="4" />
		</p>
	</form> 
</body>
</html>
